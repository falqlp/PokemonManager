<table matSort (matSortChange)="sort($event)" mat-table [dataSource]="$data">
  <ng-container
    *ngFor="let column of conf.columns"
    [matColumnDef]="column.name"
  >
    <th *matHeaderCellDef>
      <ng-container *ngIf="column.sort; else notSortable">
        <div mat-sort-header>
          <ng-container
            pmDynamicCell
            [componentType]="column.header.component"
            [data]="column.header.data"
          >
          </ng-container>
        </div>
      </ng-container>
      <ng-template #notSortable>
        <ng-container
          pmDynamicCell
          [componentType]="column.header.component"
          [data]="column.header.data"
        >
        </ng-container>
      </ng-template>
    </th>
    <td mat-cell *matCellDef="let element">
      <ng-container
        pmDynamicCell
        [componentType]="column.content.component"
        [data]="
          column.content.data !== 'all' ? element[column.content.data] : element
        "
      />
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="mapColumnName()"></tr>
  <tr mat-row *matRowDef="let row; columns: mapColumnName()"></tr>
</table>
